<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<button type="button" onclick="getData()">GET</button><br>
<button type="button" onclick="postData()">POST</button><br>
<input type="file" onchange="upload(this)" id="upload">upload</input><br>
<textarea id="text" style="width:100%;height:500px;"></textarea>
</body>
<script src="ajax.js"></script>
<!--<script src="ajax.min.js"></script>-->
<script>
    var token ="13293|uHJwC8zC+0aoVHg5mC4CSWWq8SjjmHq2M2lDtxQgaF4l3i+2ftD3uSLQnAFcHWcvjDGpKG0PhwmxfPdwPyeKqA=="
    function getData() {
        ajax({
            type:"get",
            url:"http://test.jubao56.com"+"/v1/cmn/province/list",
            success:function (res) {
                document.getElementById("text").innerHTML=JSON.stringify(res);
                console.log(res)
            }
        })

    }

    function postData() {
        ajax({
            type: "post",
            url: "http://test.jubao56.com"+"/v1/zcb/order/save",
            data:{
                beneficiary: "武汉双视角保险理赔咨询有限公司",
                coverage: 500000,
                cargos:[
                    {file_url: "http://test.jubao56.com/res/2018/03/07/17/4942356/小兔子.jpg"}
                ],
                end_city: "南京市",
                end_province: "江苏省",
                id: 53445,
                plate_extra_no: "1",
                plate_no: "asdf123",
                policyholder: "武汉双视角保险理赔咨询有限公司",
                start_city: "武汉市",
                start_province: "湖北省"
            },
            headers:{"Authorization":"Bearer "+token},
            success:function (res) {
                document.getElementById("text").innerHTML=JSON.stringify(res);
                console.log(res)
            }
        })
    }

    function upload(e) {
        ajax({
            type:"post",
            url: "http://test.jubao56.com"+"/res/file/upload",
            headers:{"Authorization":"Bearer "+token},
            file:{
                el:e,
                name:"fileVal",
            },
            success:function (res) {
                document.getElementById("text").innerHTML=JSON.stringify(res);
                console.log(res)
            },
            fail:function (err) {
                console.log(err)
            }
        })
    }
</script>
<script>
    //1,#box
    //2,.box
    //3,span
    //3,.box #box span;#box .box span;span #box .box ...

function getElement(str) {
    var arr = str.split(" ");//[".box","#box","span"]
    var parent=document;
    arr.forEach(function (val, idx) {
        parent=getParentChild(parent,val);
    });
    return parent
}

//只能输入一个不带空格的字符串
function getParentChild(parent,str) {
    if(str.indexOf("#")!==-1){
        return parent.getElementById(str.substring(str.indexOf("#")+1))
    }else if(str.indexOf(".")!==-1){
        return parent.getElementsByClassName(str.substring(str.indexOf(".")+1))[0]
    }else{
        return parent.getElementsByTagName(str)[0]
    }
}
</script>
</html>