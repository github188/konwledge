<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0, user-scalable=no">
    <style>
        body{margin:0;padding:0;}
        .content{
            background: yellowgreen;width:100%;height:80%;overflow-y: scroll;
        }
        .content p {
            background: orange;
        }
        .back_top{
            width:100px;height:30px;
            position: fixed;right:15px;bottom:15px;
            display: none;
        }
        .header{
            height:50px;width:100%;background: #0bb20c;
            position: fixed;
            display: none;
            opacity: 0;
        }
    </style>
</head>
<body class="backTop">
<div class="header"></div>
<div class="content">
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
<p>内容X</p>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
<p>内容X</p>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
<p>内容X</p>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
<p>内容X</p>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
<p>内容X</p>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
<p>内容X</p>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
<p>内容X</p>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
<p>内容X</p>
1-------------------------------<br/>
1-------------------------------<br/>
1-------------------------------<br/>
</div>
<button onclick="goTop()" class="back_top">回到顶部</button>
</body>
<script>
    var clientHeight = document.documentElement.clientHeight;  //获取可视区域的高度
    var backTop = document.querySelector(".back_top");
    var timer = null;
    var isTop = true;   //定义一个布尔值，用于判断是否到达顶部
    var header = document.querySelector(".header");

    //手动滚动事件----window.onscroll，或者是document.addEventListener('scroll',function (e) {})
    window.onscroll =function () {
        var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        backTop.style.display = scrollTop>=clientHeight?"block":"none";

        if(!isTop){ //判断当点击回到顶部按钮后滚动条在回滚过程中，若手动滚动滚动条，则清除定时器---即，只要发生scroll事件[手动滚动滚动条事件]，则清除计时器
            clearInterval(timer);
        }
        isTop = false;

        if(scrollTop>200){
            header.style.display="block";
            var length = scrollTop-200;
            var data = length/600;
            console.log(data,"data");
            if(0<=data<=1){
                header.style.opacity=data;
            }
        }else{
            header.style.display="none";
            header.style.opacity=0;
        }
    };

    function goTop() {
        timer = setInterval( function(){
            //获取滚动条的滚动高度
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            //用于设置速度差，产生缓动的效果
            var speed = Math.floor(-scrollTop / 6);
            document.documentElement.scrollTop = document.body.scrollTop = scrollTop + speed;//用纯数字赋值
            isTop =true;  //用于阻止滚动事件清除定时器
            if(scrollTop == 0){
                clearInterval(timer);
            }
        },50 );
    }

</script>
</html>