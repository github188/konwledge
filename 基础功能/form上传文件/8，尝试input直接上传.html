<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>8</title>
</head>
<body>
<!--<form id="upload-form" enctype="multipart/form-data" >-->
    　　　<input type="file" id="upload" onchange="postFile()"
              /> <br />
<!--</form>-->
</body>
<script>
    function postFile() {
        var xhr = null;
        if(window.XMLHttpRequest){
            xhr = new XMLHttpRequest();
        }else{
            xhr = new ActiveXObject("Microsoft.XMLHTTP");
        }
        var formData = new FormData();
        //添加非文件数据
//        formData.append("username","123456");
//        formData.append("password","67890");
        //添加文件数据
        formData.append("fileVal",document.getElementById("upload").files[0]);
        xhr.open('POST', "http://test.jubao56.com/res/file/upload");
        xhr.send(formData);
        xhr.onreadystatechange = function() {
            if(xhr.readyState == 4 && xhr.status == 200) {
                console.log(JSON.parse(xhr.responseText));
                console.log("=====success============")
            }else{
                console.log(xhr.statusText);
                console.log("===error======")
            }
        };
        xhr.timeout = 2000;
        xhr.ontimeout = function(event){
            alert('请求超时！');
        };
    }

    //    var formData = new FormData();
    //    formData.append('username','张三');
    //    formData.append('id', '1234');
    //    xhr.send(formData);
    //    var form = document.getElementById('upload-form');
    //    var formData = new FormData(form);
    ////    formData.append('secret', '123456'); // 添加一个表单项
    //    xhr.open('POST', "http://test.jubao56.com/res/file/upload");
    //    xhr.send(formData);
</script>
</html>